FROM openrtm/devel-rtm:ubuntu18.04

COPY OpenRTM-aist /root/OpenRTM-aist
WORKDIR /root/OpenRTM-aist

RUN apt-get update\
 && apt-get install -y --no-install-recommends\
 clang-8

RUN update-alternatives --install /usr/bin/clang clang /usr/bin/clang-8 70\
 && update-alternatives --install /usr/bin/clang++ clang++ /usr/bin/clang++-8 70\
 && update-alternatives --install /usr/bin/cc cc /usr/bin/clang 100\
 && update-alternatives --install /usr/bin/c++ c++ /usr/bin/clang++ 100

RUN cmake -DCORBA=omniORB -DFLUENTBIT_ENABLE=ON  -DFLUENTBIT_ROOT=/usr/local/include\
 -DSSL_ENABLE=ON -DCMAKE_BUILD_TYPE=Release -DOBSERVER_ENABLE=ON -S . -Bbuild_openrtm\
 && cmake --build build_openrtm -- -j$(nproc)
 
